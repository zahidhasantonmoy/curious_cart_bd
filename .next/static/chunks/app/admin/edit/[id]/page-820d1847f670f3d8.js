(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[838],{3915:function(e,t,a){Promise.resolve().then(a.bind(a,1555))},6463:function(e,t,a){"use strict";var s=a(1169);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},1555:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var s=a(7437),r=a(2265),l=a(6463),i=a(4498);function o(){let[e,t]=(0,r.useState)(null),{id:a}=(0,l.useParams)();return(0,r.useEffect)(()=>{a&&(async()=>{let e=await fetch("/api/products/".concat(a));e.ok&&t(await e.json())})()},[a]),(0,s.jsxs)("div",{children:[(0,s.jsx)("header",{className:"bg-white shadow-md",children:(0,s.jsxs)("nav",{className:"container mx-auto px-6 py-3 flex justify-between items-center",children:[(0,s.jsx)("a",{href:"/",className:"text-2xl font-bold text-gray-800",children:"Curious Cart BD"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("a",{href:"/",className:"mx-2 text-gray-800 hover:text-gray-600",children:"Home"}),(0,s.jsx)("a",{href:"/admin",className:"mx-2 text-gray-800 hover:text-gray-600",children:"Admin"})]})]})}),(0,s.jsxs)("main",{className:"container mx-auto px-6 py-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Edit Product"}),(0,s.jsx)("div",{className:"max-w-2xl mx-auto",children:e?(0,s.jsx)(i.default,{product:e}):(0,s.jsx)("div",{children:"Loading..."})})]}),(0,s.jsx)("footer",{className:"bg-gray-800 text-white py-6 mt-6",children:(0,s.jsx)("div",{className:"container mx-auto px-6 text-center",children:(0,s.jsx)("p",{children:"\xa9 2025 Curious Cart BD. All Rights Reserved."})})})]})}},4498:function(e,t,a){"use strict";var s=a(7437),r=a(2265),l=a(6463);t.default=e=>{let{product:t}=e,[a,i]=(0,r.useState)({name:"",description:"",price:0,image:"",category:"",stock:0}),[o,n]=(0,r.useState)(null),[d,c]=(0,r.useState)([]),m=(0,l.useRouter)();(0,r.useEffect)(()=>{t&&(i(t),c(t.variants||[]))},[t]);let u=e=>{let{name:t,value:a}=e.target;i(e=>({...e,[t]:a}))},x=(e,t,a)=>{let s=[...d];s[e][t]=a,c(s)},g=e=>{c(t=>t.filter((t,a)=>a!==e))},h=async e=>{e.preventDefault();let s=a.image;if(o){let e=new FormData;e.append("file",o);let t=await fetch("/api/upload",{method:"POST",body:e});if(t.ok)s=(await t.json()).url;else{alert("Image upload failed.");return}}let r=t?"/api/products/".concat(t.id):"/api/products",l=t?"PUT":"POST";(await fetch(r,{method:l,headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,image:s,variants:d})})).ok&&m.push("/admin")};return(0,s.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,s.jsx)("input",{type:"text",name:"name",id:"name",value:a.name,onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,s.jsx)("textarea",{name:"description",id:"description",value:a.description,onChange:u,rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Price"}),(0,s.jsx)("input",{type:"number",name:"price",id:"price",value:a.price,onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700",children:"Stock"}),(0,s.jsx)("input",{type:"number",name:"stock",id:"stock",value:a.stock,onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,s.jsx)("input",{type:"text",name:"category",id:"category",value:a.category,onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"currentImage",className:"block text-sm font-medium text-gray-700",children:"Current Image URL"}),(0,s.jsx)("input",{type:"text",name:"image",id:"currentImage",value:a.image,onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"imageUpload",className:"block text-sm font-medium text-gray-700",children:"Upload New Image"}),(0,s.jsx)("input",{type:"file",name:"imageUpload",id:"imageUpload",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&n(e.target.files[0])},className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),(0,s.jsxs)("div",{className:"border p-4 rounded-md",children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Product Variants"}),d.map((e,t)=>(0,s.jsxs)("div",{className:"flex space-x-2 mb-2 items-end",children:[(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("label",{htmlFor:"variant-type-".concat(t),className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,s.jsx)("input",{type:"text",id:"variant-type-".concat(t),value:e.type,onChange:e=>x(t,"type",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm",placeholder:"e.g., Size, Color"})]}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("label",{htmlFor:"variant-value-".concat(t),className:"block text-sm font-medium text-gray-700",children:"Value"}),(0,s.jsx)("input",{type:"text",id:"variant-value-".concat(t),value:e.value,onChange:e=>x(t,"value",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm",placeholder:"e.g., Small, Blue"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"variant-modifier-".concat(t),className:"block text-sm font-medium text-gray-700",children:"Price Modifier"}),(0,s.jsx)("input",{type:"number",id:"variant-modifier-".concat(t),value:e.price_modifier,onChange:e=>x(t,"price_modifier",parseFloat(e.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm",placeholder:"e.g., 5.00"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>g(t),className:"bg-red-500 text-white px-3 py-1 rounded-md hover:bg-red-600",children:"Remove"})]},t)),(0,s.jsx)("button",{type:"button",onClick:()=>{c(e=>[...e,{type:"",value:"",price_modifier:0}])},className:"mt-2 bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300",children:"Add Variant"})]}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600",children:t?"Update Product":"Add Product"})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=3915)}),_N_E=e.O()}]);