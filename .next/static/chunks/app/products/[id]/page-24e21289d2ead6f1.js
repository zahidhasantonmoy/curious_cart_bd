(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{7643:function(e,t,r){Promise.resolve().then(r.bind(r,7717))},7717:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(7437),s=r(6341),l=r(2265),i=r(6463),n=r(7138),o=r(1435);function c(){let[e,t]=(0,l.useState)(null),[r,c]=(0,l.useState)([]),[d,m]=(0,l.useState)(""),[u,x]=(0,l.useState)(5),[h,g]=(0,l.useState)(""),[f,v]=(0,l.useState)(null),{addToCart:j}=(0,o.j)(),{id:b}=(0,i.useParams)();(0,l.useEffect)(()=>{let e=localStorage.getItem("currentUser");e&&g(e),b&&(async()=>{let e=await fetch("/api/products/".concat(b));if(e.ok){let r=await e.json();t(r),r.variants&&r.variants.length>0&&v(r.variants[0])}else t(null);let r=await fetch("/api/products/".concat(b,"/reviews"));r.ok?c(await r.json()):c([])})()},[b]);let p=async e=>{if(e.preventDefault(),!h){alert("Please log in to submit a review.");return}let t=await fetch("/api/products/".concat(b,"/reviews"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:h,rating:u,comment:d})});if(t.ok){let e=await t.json();c(t=>[...t,e]),m(""),x(5)}else alert("Failed to submit review.")};if(!e)return(0,a.jsx)("div",{children:"Product not found"});let y=e.price+(f?f.price_modifier:0);return(0,a.jsxs)("div",{children:[(0,a.jsx)(s.Z,{}),(0,a.jsxs)("main",{className:"container mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,a.jsx)("div",{className:"md:w-1/2",children:(0,a.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-auto object-cover rounded-lg"})}),(0,a.jsxs)("div",{className:"md:w-1/2 md:pl-8 mt-4 md:mt-0",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:e.name}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:e.description}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-800 mt-4",children:["$",y.toFixed(2)]}),e.variants&&e.variants.length>0&&(0,a.jsx)("div",{className:"mt-4",children:Object.entries(e.variants.reduce((e,t)=>((e[t.type]=e[t.type]||[]).push(t),e),{})).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:[t,":"]}),(0,a.jsx)("select",{id:t,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",onChange:e=>{let t=r.find(t=>t.value===e.target.value);t&&v(t)},value:(null==f?void 0:f.value)||"",children:r.map(e=>(0,a.jsxs)("option",{value:e.value,children:[e.value," ",e.price_modifier>0?"(+".concat(e.price_modifier.toFixed(2),")"):""]},e.value))})]},t)})}),(0,a.jsx)("button",{onClick:()=>{e&&(j(e),alert("".concat(e.name," ").concat(f?"(".concat(f.value,")"):""," added to cart!")))},className:"bg-blue-500 text-white px-6 py-2 rounded-lg mt-4 hover:bg-blue-600",children:"Add to Cart"}),(0,a.jsx)("a",{href:"tel:+8801234567890",className:"bg-green-500 text-white px-6 py-2 rounded-lg mt-4 ml-4 inline-block hover:bg-green-600",children:"Call Now"}),(0,a.jsx)("button",{onClick:()=>{if(!e)return;let t=JSON.parse(localStorage.getItem("wishlist")||"[]");t.find(t=>t.id===e.id)?alert("".concat(e.name," is already in your wishlist!")):(localStorage.setItem("wishlist",JSON.stringify([...t,e])),alert("".concat(e.name," added to wishlist!")))},className:"bg-yellow-500 text-white px-6 py-2 rounded-lg mt-4 ml-4 hover:bg-yellow-600",children:"Add to Wishlist"})]})]}),(0,a.jsxs)("section",{className:"mt-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Customer Reviews"}),0===r.length?(0,a.jsx)("p",{children:"No reviews yet. Be the first to review!"}):(0,a.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,a.jsxs)("div",{className:"border p-4 rounded-lg shadow-sm",children:[(0,a.jsxs)("p",{className:"font-semibold",children:[e.username," - Rating: ",e.rating,"/5"]}),(0,a.jsx)("p",{className:"text-gray-700",children:e.comment})]},e.id))}),(0,a.jsx)("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Submit Your Review"}),h?(0,a.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"rating",className:"block text-sm font-medium text-gray-700",children:"Rating:"}),(0,a.jsx)("select",{id:"rating",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:u,onChange:e=>x(parseInt(e.target.value)),children:[1,2,3,4,5].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700",children:"Comment:"}),(0,a.jsx)("textarea",{id:"comment",rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:d,onChange:e=>m(e.target.value),required:!0})]}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600",children:"Submit Review"})]}):(0,a.jsxs)("p",{className:"text-gray-600",children:["Please ",(0,a.jsx)(n.default,{href:"/login",className:"text-blue-500 hover:underline",children:"log in"})," to submit a review."]})]})]}),(0,a.jsx)("footer",{className:"bg-gray-800 text-white py-6 mt-6",children:(0,a.jsxs)("div",{className:"container mx-auto px-6 text-center",children:[(0,a.jsx)("p",{children:"\xa9 2025 Curious Cart BD. All Rights Reserved."}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{children:"Contact: +880 1234 567890"}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4 mt-2",children:[(0,a.jsx)("a",{href:"https://facebook.com/curiouscartbd",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-400",children:"Facebook"}),(0,a.jsx)("a",{href:"https://instagram.com/curiouscartbd",target:"_blank",rel:"noopener noreferrer",className:"hover:text-pink-400",children:"Instagram"})]})]})]})})]})}},6341:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(7437),s=r(7138),l=r(6648),i=r(2265),n=r(6463);function o(){let[e,t]=(0,i.useState)(!1),[r,o]=(0,i.useState)(""),c=(0,n.useRouter)();return(0,i.useEffect)(()=>{let e=localStorage.getItem("userToken"),r=localStorage.getItem("currentUser");e&&r?(t(!0),o(r)):(t(!1),o(""))},[]),(0,a.jsx)("header",{className:"bg-white shadow-md",children:(0,a.jsxs)("nav",{className:"container mx-auto px-6 py-3 flex justify-between items-center",children:[(0,a.jsx)(s.default,{href:"/",children:(0,a.jsx)(l.default,{src:"/images/logo.jpg",alt:"Curious Cart BD Logo",width:150,height:50})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(s.default,{href:"/",className:"mx-2 text-gray-800 hover:text-gray-600",children:"Home"}),(0,a.jsx)(s.default,{href:"/about",className:"mx-2 text-gray-800 hover:text-gray-600",children:"About Us"}),(0,a.jsx)(s.default,{href:"/cart",className:"mx-2 text-gray-800 hover:text-gray-600",children:"Cart"}),e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.default,{href:"/profile",className:"mx-2 text-gray-800 hover:text-gray-600",children:["Profile (",r,")"]}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("userToken"),localStorage.removeItem("currentUser"),t(!1),o(""),c.push("/")},className:"mx-2 text-gray-800 hover:text-gray-600 bg-transparent border-none cursor-pointer",children:"Logout"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.default,{href:"/login",className:"mx-2 text-gray-800 hover:text-gray-600",children:"Login"}),(0,a.jsx)(s.default,{href:"/register",className:"mx-2 text-gray-800 hover:text-gray-600",children:"Register"})]})]})]})})}},1435:function(e,t,r){"use strict";r.d(t,{CartProvider:function(){return i},j:function(){return n}});var a=r(7437),s=r(2265);let l=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)([]);return(0,a.jsx)(l.Provider,{value:{cart:r,addToCart:(e,t)=>{i(r=>r.find(r=>{var a;return r.id===e.id&&(null===(a=r.selectedVariant)||void 0===a?void 0:a.value)===(null==t?void 0:t.value)})?r.map(r=>{var a;return r.id===e.id&&(null===(a=r.selectedVariant)||void 0===a?void 0:a.value)===(null==t?void 0:t.value)?{...r,quantity:r.quantity+1}:r}):[...r,{...e,quantity:1,selectedVariant:t}])},removeFromCart:e=>{i(t=>t.filter(t=>t.id!==e))},clearCart:()=>{i([])}},children:t})},n=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}},function(e){e.O(0,[138,595,971,23,744],function(){return e(e.s=7643)}),_N_E=e.O()}]);